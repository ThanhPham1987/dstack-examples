workflows:
  - name: stable-diffusion-gpu-i
    provider: bash
    ports:
      - 7860
    commands:
      - pip install -r stable_diffusion/requirements.txt
      - python stable_diffusion/app.py
    cache:
      - ~/.cache/pip
      - ./models
    resources:
      gpu:
        count: 1
      memory: 16GB
      interruptible: true

  - name: code-stable-diffusion-gpu-i
    provider: code
    ports:
      - 7860
    setup:
      - pip install -r stable_diffusion/requirements.txt
    cache:
      - ~/.cache/pip
      - ./models
    resources:
      gpu:
        count: 1
      memory: 16GB
      interruptible: true